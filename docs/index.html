<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>heap-js</title><meta name="description" content="Documentation for heap-js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">heap-js</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>heap-js</h2></div><div class="tsd-panel tsd-typography"><a id="md:-heapjs" class="tsd-anchor"></a><h1><a href="#md:-heapjs"><img src="assets/heap-js.png" alt="Heap.js"> Heap.js</a></h1><p><a href="https://www.npmjs.com/package/heap-js"><img src="https://img.shields.io/npm/v/heap-js.svg?style=flat" alt="npm version"></a>
<a href="https://coveralls.io/github/ignlg/heap-js?branch=master"><img src="https://img.shields.io/coveralls/ignlg/heap-js/master.svg?style=flat" alt="Coverage Status"></a></p>
<p><strong>Efficient Binary heap (priority queue, binary tree) data structure for JavaScript / TypeScript.</strong></p>
<p><strong>Now with support for async comparators with the new <code>HeapAsync</code> class!</strong></p>
<p>Includes JavaScript methods, Python&#39;s <em>heapq module</em> methods, and Java&#39;s <em>PriorityQueue</em> methods.</p>
<p>Easy to use, known interfaces, tested, and well-documented JavaScript binary heap library.</p>
<p>Instances are <code>integer min heap</code> by default.</p>
<p><a href="https://gitpod.io/#https://github.com/ignlg/heap-js"><img src="https://gitpod.io/button/open-in-gitpod.svg" alt="Open in Gitpod"></a></p>
<a id="md:is-it-faster-than-sorting-an-array" class="tsd-anchor"></a><h2><a href="#md:is-it-faster-than-sorting-an-array">Is it faster than sorting an array?</a></h2><p>It depends on your usage, but for some scenarios, it is much faster:</p>
<pre><code><span class="hl-0">heap</span><span class="hl-1"> </span><span class="hl-0">vs</span><span class="hl-1"> </span><span class="hl-2">array</span><span class="hl-1">: </span><span class="hl-0">push</span><span class="hl-1"> + </span><span class="hl-0">pop</span><span class="hl-1">/</span><span class="hl-0">unshift</span><span class="hl-1"> </span><span class="hl-3">50</span><br/><span class="hl-1"> </span><span class="hl-0">heap</span><span class="hl-1">  </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">72</span><span class="hl-1">,</span><span class="hl-3">130</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">0.50</span><span class="hl-1">% (</span><span class="hl-3">93</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><span class="hl-1"> </span><span class="hl-0">array</span><span class="hl-1"> </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">121</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">78.09</span><span class="hl-1">% (</span><span class="hl-3">5</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><br/><span class="hl-0">heap</span><span class="hl-1"> </span><span class="hl-0">vs</span><span class="hl-1"> </span><span class="hl-2">array</span><span class="hl-1">: </span><span class="hl-0">push</span><span class="hl-1"> + </span><span class="hl-0">peek</span><span class="hl-1"> </span><span class="hl-3">20</span><br/><span class="hl-1"> </span><span class="hl-0">heap</span><span class="hl-1">  </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">622</span><span class="hl-1">,</span><span class="hl-3">332</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">27.93</span><span class="hl-1">% (</span><span class="hl-3">63</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><span class="hl-1"> </span><span class="hl-0">array</span><span class="hl-1"> </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">207</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">78.18</span><span class="hl-1">% (</span><span class="hl-3">5</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><br/><span class="hl-0">heap</span><span class="hl-1"> </span><span class="hl-0">vs</span><span class="hl-1"> </span><span class="hl-2">array</span><span class="hl-1">: </span><span class="hl-0">push</span><span class="hl-1"> + </span><span class="hl-4">top</span><span class="hl-1">(</span><span class="hl-3">1</span><span class="hl-1">) </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">100</span><br/><span class="hl-1"> </span><span class="hl-0">heap</span><span class="hl-1">  </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">124</span><span class="hl-1">,</span><span class="hl-3">835</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">40.37</span><span class="hl-1">% (</span><span class="hl-3">61</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><span class="hl-1"> </span><span class="hl-0">array</span><span class="hl-1"> </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">123</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">78.49</span><span class="hl-1">% (</span><span class="hl-3">5</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><br/><span class="hl-0">heap</span><span class="hl-1"> </span><span class="hl-0">vs</span><span class="hl-1"> </span><span class="hl-2">array</span><span class="hl-1">: </span><span class="hl-0">push</span><span class="hl-1"> + </span><span class="hl-4">top</span><span class="hl-1">(</span><span class="hl-3">50</span><span class="hl-1">) </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-3">100</span><br/><span class="hl-1"> </span><span class="hl-0">heap</span><span class="hl-1">  </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">59</span><span class="hl-1">,</span><span class="hl-3">210</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">17.66</span><span class="hl-1">% (</span><span class="hl-3">82</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span><br/><span class="hl-1"> </span><span class="hl-0">array</span><span class="hl-1"> </span><span class="hl-0">x</span><span class="hl-1"> </span><span class="hl-3">125</span><span class="hl-1"> </span><span class="hl-0">ops</span><span class="hl-1">/</span><span class="hl-0">sec</span><span class="hl-1"> ±</span><span class="hl-3">78.79</span><span class="hl-1">% (</span><span class="hl-3">5</span><span class="hl-1"> </span><span class="hl-0">runs</span><span class="hl-1"> </span><span class="hl-0">sampled</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>
<a id="md:star-history" class="tsd-anchor"></a><h2><a href="#md:star-history">Star History</a></h2><p><a href="https://star-history.com/#ignlg/heap-js&Date"><img src="https://api.star-history.com/svg?repos=ignlg/heap-js&type=Date" alt="Star History Chart"></a></p>
<a id="md:changelog" class="tsd-anchor"></a><h2><a href="#md:changelog">Changelog</a></h2><a id="md:25" class="tsd-anchor"></a><h3><a href="#md:25">2.5</a></h3><ul>
<li>Improves the <code>limit</code> property to support negative, Infinity, and NaN values. They will be set as <code>0</code> and the heap will not be limited.</li>
<li>Adds the <code>setLimit</code> method to set the limit of the heap. It returns <code>NaN</code> if the limit is negative, or NaN. This method is useful to check if the limit was set as expected.</li>
<li>Improves tests and documentation.</li>
</ul>
<a id="md:24" class="tsd-anchor"></a><h3><a href="#md:24">2.4</a></h3><ul>
<li>Adds the <code>indexOf</code> method to find the first index of an element in the heap.</li>
<li>Adds the <code>indexOfEvery</code> method to find all indexes of an element in the heap.</li>
<li>Changes the <code>remove</code> method to use the <code>indexOf</code> method.</li>
<li>Changes the <code>contains</code> method to use the <code>indexOf</code> method.</li>
<li>Improves documentation.</li>
</ul>
<a id="md:23" class="tsd-anchor"></a><h3><a href="#md:23">2.3</a></h3><ul>
<li>Adds the <code>HeapAsync</code> class, with async methods and supporting async comparators. It is a drop-in replacement for the <code>Heap</code> class with Promises.</li>
</ul>
<a id="md:22" class="tsd-anchor"></a><h3><a href="#md:22">2.2</a></h3><ul>
<li>Fixes <code>.iterator()</code> method to follow <a href="https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html">Java&#39;s PriorityQueue implementation:
</a><blockquote>
<p>The Iterator provided in method <a href="https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html#iterator()">iterator()</a> is not guaranteed to traverse the elements of the priority queue in any particular order.</p>
</blockquote>
</li>
</ul>
<p>Notice that <em>using the heap directly as an iterator will consume the heap,</em> as Python&#39;s <code>heapq</code> implementation does.</p>
<a id="md:21" class="tsd-anchor"></a><h3><a href="#md:21">2.1</a></h3><ul>
<li>Adds <code>Heap.nlargest</code> as in <code>heapq</code>.</li>
<li>Adds <code>Heap.nsmallest</code> as in <code>heapq</code>.</li>
<li>Sanitizes <code>top</code> / <code>bottom</code> input to force an integer.</li>
<li>Linted with Eslint.</li>
</ul>
<a id="md:20" class="tsd-anchor"></a><h3><a href="#md:20">2.0</a></h3><p>The main breaking change is that now <em><code>top(N)</code> does NOT sort the output</em>, because sorting should not be part of the spec for a priority queue. The output is the top N elements, and they will be <em>partially ordered</em> with the peek at index <code>0</code> by definition.</p>
<ul>
<li><code>top(N)</code> is unordered, only the first element is guaranteed to be the top priority element.</li>
<li>Fixes custom heap issue <a href="https://github.com/ignlg/heap-js/issues/31">#31</a>.</li>
<li>Performance improvements.</li>
<li>More tests, including those for custom heaps.</li>
<li>Auxiliary experimental <code>top(N)</code> algorithms.</li>
<li>(WIP) Benchmarks.</li>
</ul>
<a id="md:15" class="tsd-anchor"></a><h3><a href="#md:15">1.5</a></h3><ul>
<li>Adds the <code>Iterator</code> interface and <code>iterator()</code> method.</li>
</ul>
<a id="md:examples" class="tsd-anchor"></a><h2><a href="#md:examples">Examples</a></h2><a id="md:basic-usage" class="tsd-anchor"></a><h3><a href="#md:basic-usage">Basic usage</a></h3><a id="md:min-heap" class="tsd-anchor"></a><h4><a href="#md:min-heap">Min Heap</a></h4><p>A heap where the smallest element is always at the top. It is the default heap.</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-0">Heap</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Min Heap by default</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">minHeap</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">();</span><br/><br/><span class="hl-8">// Initialize the heap with an array</span><br/><span class="hl-0">minHeap</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">([</span><span class="hl-3">5</span><span class="hl-1">, </span><span class="hl-3">18</span><span class="hl-1">, </span><span class="hl-3">1</span><span class="hl-1">]);</span><br/><span class="hl-8">// Push a new value</span><br/><span class="hl-0">minHeap</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-3">2</span><span class="hl-1">);</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">minHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 1</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">minHeap</span><span class="hl-1">.</span><span class="hl-4">pop</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 1</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">minHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 2</span>
</code><button>Copy</button></pre>
<a id="md:max-heap" class="tsd-anchor"></a><h4><a href="#md:max-heap">Max Heap</a></h4><p>A heap where the largest element is always at the top.</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-0">Heap</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Max Heap</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">maxHeap</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">(</span><span class="hl-0">Heap</span><span class="hl-1">.</span><span class="hl-0">maxComparator</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Initialize the heap with an array</span><br/><span class="hl-0">maxHeap</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">([</span><span class="hl-3">3</span><span class="hl-1">, </span><span class="hl-3">4</span><span class="hl-1">, </span><span class="hl-3">1</span><span class="hl-1">, </span><span class="hl-3">12</span><span class="hl-1">, </span><span class="hl-3">8</span><span class="hl-1">]);</span><br/><span class="hl-8">// Push a new value</span><br/><span class="hl-0">maxHeap</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">(</span><span class="hl-3">2</span><span class="hl-1">);</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">maxHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 12</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">maxHeap</span><span class="hl-1">.</span><span class="hl-4">pop</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 12</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">maxHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; 8</span>
</code><button>Copy</button></pre>
<a id="md:custom-heap" class="tsd-anchor"></a><h4><a href="#md:custom-heap">Custom Heap</a></h4><p>A heap where the most important element is always at the top, but the elements are objects with a <code>priority</code> property.</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-0">Heap</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-4">customPriorityComparator</span><span class="hl-1"> = (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1"> - </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1">;</span><br/><span class="hl-8">// Custom Heap</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">customHeap</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">(</span><span class="hl-0">customPriorityComparator</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Initialize the heap with an array</span><br/><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">([{ </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">5</span><span class="hl-1"> }, { </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">18</span><span class="hl-1"> }, { </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">1</span><span class="hl-1"> }]);</span><br/><span class="hl-8">// Push a new value</span><br/><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">({ </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">2</span><span class="hl-1"> });</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 1 }</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">pop</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 1 }</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 2 }</span>
</code><button>Copy</button></pre>
<a id="md:min-heapasync" class="tsd-anchor"></a><h4><a href="#md:min-heapasync">Min HeapAsync</a></h4><p>A heap where the most important element is always at the top, the elements are objects with a <code>priority</code> property, and the comparator function is asynchronous. Implements the same interface as <code>Heap</code>, but almost all methods return a <code>Promise</code>.</p>
<pre><code class="language-js"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-0">HeapAsync</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-4">customPriorityComparator</span><span class="hl-1"> = (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-10">Promise</span><span class="hl-1">.</span><span class="hl-4">resolve</span><span class="hl-1">(</span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1"> - </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1">);</span><br/><span class="hl-8">// Custom HeapAsync</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">customHeap</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">HeapAsync</span><span class="hl-1">(</span><span class="hl-0">customPriorityComparator</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Initialize the heap with an array</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">([{ </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">5</span><span class="hl-1"> }, { </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">18</span><span class="hl-1"> }, { </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">1</span><span class="hl-1"> }]);</span><br/><span class="hl-8">// Push a new value</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">push</span><span class="hl-1">({ </span><span class="hl-0">priority:</span><span class="hl-1"> </span><span class="hl-3">2</span><span class="hl-1"> });</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 1 }</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">pop</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 1 }</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">customHeap</span><span class="hl-1">.</span><span class="hl-4">peek</span><span class="hl-1">()); </span><span class="hl-8">//&gt; { priority: 2 }</span>
</code><button>Copy</button></pre>
<a id="md:priority-queue-usage" class="tsd-anchor"></a><h3><a href="#md:priority-queue-usage">Priority Queue usage</a></h3><a id="md:javascript--python-style-iterator-recommended" class="tsd-anchor"></a><h4><a href="#md:javascript--python-style-iterator-recommended">JavaScript / Python-style iterator (recommended)</a></h4><p>Iterates over the heap consuming it, and guarantees to traverse the elements of the heap in the order of priority. Useful.</p>
<pre><code class="language-js"><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-9">Heap</span><span class="hl-1"> } = </span><span class="hl-4">require</span><span class="hl-1">(</span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Get all tasks from the database</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">tasks</span><span class="hl-1"> = </span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-0">collection</span><span class="hl-1">.</span><span class="hl-4">find</span><span class="hl-1">().</span><span class="hl-4">toArray</span><span class="hl-1">();</span><br/><span class="hl-8">// The most important task has the lowest priority value</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-4">customPriorityComparator</span><span class="hl-1"> = (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1"> - </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Create the priority queue</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">priorityQueue</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">(</span><span class="hl-0">customPriorityComparator</span><span class="hl-1">);</span><br/><span class="hl-8">// Initialize the priority queue with the tasks</span><br/><span class="hl-0">priorityQueue</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">(</span><span class="hl-0">tasks</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Iterator that will consume the heap while traversing it in the order of priority</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">task</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-0">priorityQueue</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">task</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:java-style-iterator-not-recommended" class="tsd-anchor"></a><h4><a href="#md:java-style-iterator-not-recommended">Java-style iterator (not recommended)</a></h4><p>Iterates over the heap without consuming it, but does not guarantee to traverse the elements of the heap in any particular order. Barely useful.</p>
<pre><code class="language-js"><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-9">Heap</span><span class="hl-1"> } = </span><span class="hl-4">require</span><span class="hl-1">(</span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Get all tasks from the database</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">tasks</span><span class="hl-1"> = </span><span class="hl-0">db</span><span class="hl-1">.</span><span class="hl-0">collection</span><span class="hl-1">.</span><span class="hl-4">find</span><span class="hl-1">().</span><span class="hl-4">toArray</span><span class="hl-1">();</span><br/><span class="hl-8">// The most important task has the lowest priority value</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-4">customPriorityComparator</span><span class="hl-1"> = (</span><span class="hl-0">a</span><span class="hl-1">, </span><span class="hl-0">b</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1"> - </span><span class="hl-0">b</span><span class="hl-1">.</span><span class="hl-0">priority</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">priorityQueue</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">(</span><span class="hl-0">customPriorityComparator</span><span class="hl-1">);</span><br/><span class="hl-8">// Initialize the priority queue with the tasks</span><br/><span class="hl-0">priorityQueue</span><span class="hl-1">.</span><span class="hl-4">init</span><span class="hl-1">(</span><span class="hl-0">tasks</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// Iterator, the Java way, that will not consume the heap BUT does not guarantee to traverse the elements of the heap in any particular order. Barely useful.</span><br/><span class="hl-6">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">task</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-0">priorityQueue</span><span class="hl-1">.</span><span class="hl-4">iterator</span><span class="hl-1">()) {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">task</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:python-like-static-methods" class="tsd-anchor"></a><h3><a href="#md:python-like-static-methods">Python-like static methods</a></h3><pre><code class="language-js"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-0">Heap</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-7">&#39;heap-js&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">numbers</span><span class="hl-1"> = [</span><span class="hl-3">2</span><span class="hl-1">, </span><span class="hl-3">3</span><span class="hl-1">, </span><span class="hl-3">7</span><span class="hl-1">, </span><span class="hl-3">5</span><span class="hl-1">];</span><br/><br/><span class="hl-8">// Changes the array elements order into a heap in-place</span><br/><span class="hl-0">Heap</span><span class="hl-1">.</span><span class="hl-4">heapify</span><span class="hl-1">(</span><span class="hl-0">numbers</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">numbers</span><span class="hl-1">); </span><span class="hl-8">//&gt; [ 2, 3, 5, 7 ]</span><br/><br/><span class="hl-8">// Pushes a new value to the heap</span><br/><span class="hl-0">Heap</span><span class="hl-1">.</span><span class="hl-4">heappush</span><span class="hl-1">(</span><span class="hl-0">numbers</span><span class="hl-1">, </span><span class="hl-3">1</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-4">log</span><span class="hl-1">(</span><span class="hl-0">numbers</span><span class="hl-1">); </span><span class="hl-8">//&gt; [ 1, 2, 5, 7, 3 ]</span>
</code><button>Copy</button></pre>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><pre><code class="language-bash"><span class="hl-4">yarn</span><span class="hl-1"> </span><span class="hl-7">add</span><span class="hl-1"> </span><span class="hl-7">heap-js</span><span class="hl-1"> </span><span class="hl-8"># if you use yarn</span><br/><br/><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-7">install</span><span class="hl-1"> </span><span class="hl-5">--save</span><span class="hl-1"> </span><span class="hl-7">heap-js</span><span class="hl-1"> </span><span class="hl-8"># if you use npm</span>
</code><button>Copy</button></pre>
<a id="md:constructor" class="tsd-anchor"></a><h2><a href="#md:constructor">Constructor</a></h2><a id="md:heap" class="tsd-anchor"></a><h3><a href="#md:heap">Heap</a></h3><pre><code class="language-js"><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">Heap</span><span class="hl-1">([</span><span class="hl-0">comparator</span><span class="hl-1">]);</span>
</code><button>Copy</button></pre>
<a id="md:heapasync" class="tsd-anchor"></a><h3><a href="#md:heapasync">HeapAsync</a></h3><pre><code class="language-js"><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-4">HeapAsync</span><span class="hl-1">([</span><span class="hl-0">asyncComparator</span><span class="hl-1">]);</span>
</code><button>Copy</button></pre>
<a id="md:comparators-already-included" class="tsd-anchor"></a><h2><a href="#md:comparators-already-included">Comparators already included</a></h2><ul>
<li><code>Heap.minComparator</code>: Uses less-than operator to compare elements. It is the default comparator.</li>
<li><code>Heap.maxComparator</code>: Uses greater-than operator to compare elements.</li>
<li><code>Heap.minComparatorNumber</code>: Uses subtraction <code>a - b</code> to compare elements.</li>
<li><code>Heap.maxComparatorNumber</code>: Uses subtraction <code>b - a</code> to compare elements.</li>
</ul>
<a id="md:implements-javascript-style-methods" class="tsd-anchor"></a><h2><a href="#md:implements-javascript-style-methods">Implements JavaScript-style methods</a></h2><ul>
<li><code>for (const value of heap)</code> directly usable as an Iterator, <strong>consumes the heap.</strong></li>
<li><code>length</code> of the heap.</li>
<li><code>limit</code> the number of elements in the heap.</li>
<li><code>pop()</code> the top element.</li>
<li><code>push(...elements)</code> one or more elements to the heap.</li>
<li><code>pushpop(element)</code> faster than <code>push</code> &amp; <code>pop</code>.</li>
<li><code>replace(element)</code> faster than <code>pop</code> &amp; <code>push</code>.</li>
<li><code>top(number?)</code> most valuable elements from the heap.</li>
<li><code>bottom(number?)</code> least valuable elements from the heap.</li>
<li><code>indexOf(element, fn?)</code> returns the internal index of the first occurrence of the element in the heap.</li>
<li><code>indexOfEvery(element, fn?)</code> returns an array with the internal indexes of all occurrences of the element in the heap.</li>
</ul>
<a id="md:implements-java39s-priorityqueue-interface" class="tsd-anchor"></a><h2><a href="#md:implements-java39s-priorityqueue-interface">Implements Java&#39;s <code>PriorityQueue</code> interface</a></h2><ul>
<li><code>add(element)</code> to the heap.</li>
<li><code>addAll([element, element, ... ])</code> to the heap, faster than loop <code>add</code>.</li>
<li><code>clear()</code></li>
<li><code>clone()</code></li>
<li><code>comparator()</code></li>
<li><code>contains(element, fn?)</code></li>
<li><em><code>element()</code> alias of <code>peek()</code></em></li>
<li><code>isEmpty()</code></li>
<li><code>iterator()</code> returns the same as <code>toArray()</code> because it is iterable and follows Java&#39;s implementation. Barely useful. Use <code>for (const value of heap)</code> instead.</li>
<li><em><code>offer(element)</code> alias of <code>add(element)</code></em></li>
<li><code>peek()</code></li>
<li><em><code>poll()</code> alias of <code>pop()</code></em></li>
<li><code>remove(element?)</code></li>
<li><em><code>removeAll()</code> alias of <code>clear()</code></em></li>
<li><em><code>size()</code> alias of <code>length</code></em></li>
<li><code>toArray()</code></li>
<li><code>toString()</code></li>
</ul>
<p>To do:</p>
<ul>
<li><code>containsAll</code></li>
<li><code>equals</code></li>
<li><code>retainAll</code></li>
</ul>
<a id="md:implements-static-python39s-heapq-interface" class="tsd-anchor"></a><h2><a href="#md:implements-static-python39s-heapq-interface">Implements static Python&#39;s <code>heapq</code> interface</a></h2><ul>
<li><code>Heap.heapify(array, comparator?)</code> that converts an array to an array-heap.</li>
<li><code>Heap.heappop(heapArray, comparator?)</code> that takes the peek of the array-heap.</li>
<li><code>Heap.heappush(heapArray, item, comparator?)</code> that appends elements to the array-heap.</li>
<li><code>Heap.heappushpop(heapArray, item, comparator?)</code> faster than <code>heappush</code> &amp; <code>heappop</code>.</li>
<li><code>Heap.heapreplace(heapArray, item, comparator?)</code> faster than <code>heappop</code> &amp; <code>heappush</code>.</li>
<li><code>Heap.nlargest(n, iterable, comparator?)</code> that gets the <code>n</code> most valuable elements of an iterable.</li>
<li><code>Heap.nsmallest(n, iterable, comparator?)</code> that gets the <code>n</code> least valuable elements of an iterable.</li>
</ul>
<p>Extras:</p>
<ul>
<li><code>Heap.heaptop(n, heapArray, comparator?)</code> that returns the <code>n</code> most valuable elements of the array-heap</li>
<li><code>Heap.heapbottom(n, heapArray, comparator?)</code> that returns the <code>n</code> least valuable elements of the array-heap</li>
</ul>
<p>To do:</p>
<ul>
<li><code>merge(...iterables, comparator?)</code></li>
</ul>
<a id="md:documentation" class="tsd-anchor"></a><h2><a href="#md:documentation">Documentation</a></h2><p><a href="https://ignlg.github.io/heap-js/">https://ignlg.github.io/heap-js/</a></p>
<a id="md:contributing" class="tsd-anchor"></a><h2><a href="#md:contributing">Contributing</a></h2><p>Development of <strong>Heap.js</strong> happens in the open on GitHub, and I am grateful to the community for contributing bug fixes and improvements.</p>
<a id="md:dev-setup" class="tsd-anchor"></a><h3><a href="#md:dev-setup">Dev setup</a></h3><pre><code class="language-bash"><span class="hl-4">yarn</span>
</code><button>Copy</button></pre>
<a id="md:tests" class="tsd-anchor"></a><h3><a href="#md:tests">Tests</a></h3><pre><code class="language-bash"><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-7">run</span><span class="hl-1"> </span><span class="hl-7">test</span>
</code><button>Copy</button></pre>
<a id="md:benchmarks" class="tsd-anchor"></a><h3><a href="#md:benchmarks">Benchmarks</a></h3><pre><code class="language-bash"><span class="hl-4">npm</span><span class="hl-1"> </span><span class="hl-7">run</span><span class="hl-1"> </span><span class="hl-7">benchmarks</span>
</code><button>Copy</button></pre>
<a id="md:license" class="tsd-anchor"></a><h3><a href="#md:license">License</a></h3><p>Heap.js is <a href="LICENSE">BSD licensed</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:-heapjs"><span> <wbr/>Heap.js</span></a><ul><li><a href="#md:is-it-faster-than-sorting-an-array"><span>Is it faster than sorting an array?</span></a></li><li><a href="#md:star-history"><span>Star <wbr/>History</span></a></li><li><a href="#md:changelog"><span>Changelog</span></a></li><li><ul><li><a href="#md:25"><span>2.5</span></a></li><li><a href="#md:24"><span>2.4</span></a></li><li><a href="#md:23"><span>2.3</span></a></li><li><a href="#md:22"><span>2.2</span></a></li><li><a href="#md:21"><span>2.1</span></a></li><li><a href="#md:20"><span>2.0</span></a></li><li><a href="#md:15"><span>1.5</span></a></li></ul></li><li><a href="#md:examples"><span>Examples</span></a></li><li><ul><li><a href="#md:basic-usage"><span>Basic usage</span></a></li><li><ul><li><a href="#md:min-heap"><span>Min <wbr/>Heap</span></a></li><li><a href="#md:max-heap"><span>Max <wbr/>Heap</span></a></li><li><a href="#md:custom-heap"><span>Custom <wbr/>Heap</span></a></li><li><a href="#md:min-heapasync"><span>Min <wbr/>Heap<wbr/>Async</span></a></li></ul></li><li><a href="#md:priority-queue-usage"><span>Priority <wbr/>Queue usage</span></a></li><li><ul><li><a href="#md:javascript--python-style-iterator-recommended"><span>Java<wbr/>Script / <wbr/>Python-<wbr/>style iterator (recommended)</span></a></li><li><a href="#md:java-style-iterator-not-recommended"><span>Java-<wbr/>style iterator (not recommended)</span></a></li></ul></li><li><a href="#md:python-like-static-methods"><span>Python-<wbr/>like static methods</span></a></li></ul></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:constructor"><span>Constructor</span></a></li><li><ul><li><a href="#md:heap"><span>Heap</span></a></li><li><a href="#md:heapasync"><span>Heap<wbr/>Async</span></a></li></ul></li><li><a href="#md:comparators-already-included"><span>Comparators already included</span></a></li><li><a href="#md:implements-javascript-style-methods"><span>Implements <wbr/>Java<wbr/>Script-<wbr/>style methods</span></a></li><li><a href="#md:implements-java39s-priorityqueue-interface"><span>Implements <wbr/>Java&#39;s <wbr/>Priority<wbr/>Queue interface</span></a></li><li><a href="#md:implements-static-python39s-heapq-interface"><span>Implements static <wbr/>Python&#39;s heapq interface</span></a></li><li><a href="#md:documentation"><span>Documentation</span></a></li><li><a href="#md:contributing"><span>Contributing</span></a></li><li><ul><li><a href="#md:dev-setup"><span>Dev setup</span></a></li><li><a href="#md:tests"><span>Tests</span></a></li><li><a href="#md:benchmarks"><span>Benchmarks</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>heap-js</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>